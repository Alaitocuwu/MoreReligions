namespace = mr_institutions

#Renaissance Prelude - Patronage of the Arts
province_event = {
	id = mr_institutions.1
	title = mr_institutions.1.t
	desc = mr_institutions.1.d
	picture = MYSTIC_IN_PRAYER_eventPicture
	
	#this event only fires 3 times
	trigger = {
		NOT = { is_institution_enabled = renaissance }
		NOT = { 
			4161 = {
				check_variable = {
					which = ren_cultural_patronage
					value = 3
				} 
			}
		}
		#will not pick cultures that have already been picked
		NOT = { has_province_flag = ren_culture_picked }
		owner = {
			NOT = { has_country_flag = recieved_patronage_artists_event }
		}
		#any region neighboring the mediterranean
		OR = {
			region = france_region
			region = italy_region
			region = south_german_region
			region = iberia_region
			region = balkan_region
			region = egypt_region
			region = maghreb_region
			region = mashriq_region
			region = anatolia_region
		}
		has_owner_culture = yes
	}
	
	mean_time_to_happen = {
		days = 365
		modifier = {
			factor = 0.5
			owner = {
				artist = 1
			}
		}
		modifier = {
			factor = 0.9
			owner = {
				ai = no
			}
		}
		modifier = {
			factor = 2.0
			owner = {
				NOT = { prestige = 0 }
			}
		}
	}
	
	
	immediate = {
		hidden_effect = {
			export_to_variable = {
				variable_name = ren_culture_which
				value = culture
			}
		}
	}
	
	option = { #endorse the arts
		name = mr_institutions.1.a
		
		#marks every province of the culture as eligible
		every_province = {
			limit = {
				is_empty = no
				is_wasteland = no
				culture = variable:ROOT:ren_culture_which
			}
			set_province_flag = ren_culture_picked
		}
		
		owner = {
			every_owned_province = {
				limit = {
					is_empty = no
					is_wasteland = no
					culture = variable:ROOT:ren_culture_which
				}
				add_province_modifier = {
					name = mr_patronage_of_artists_province
					duration = -1
				}
			}
			add_country_modifier = {
				name = mr_patronage_of_artists
				duration = 3650
			}
			define_advisor = {
				type = artist
				skill = 3
				cost_multiplier = 0.9
				culture = variable:ren_culture_which
			}
		}
		
		custom_tooltip = YOUR_CULTURE_IS_ELIGBLE_TO_SPAWN_RENAISSANCE
		
		#so it only fires thrice
		hidden_effect = {
			4161 = {
				change_variable = {
					which = ren_cultural_patronage
					value = 1
				}
			}
			set_country_flag = recieved_patronage_artists_event
		}
	}
	
	option = { #we cant afford this
		name = mr_institutions.1.b
		set_country_flag = recieved_patronage_artists_event
	}
}

province_event = { #Greek Refugees
	id = mr_institutions.2
	title = mr_institutions.2.t
	desc = mr_institutions.2.d
	picture = BIG_BOOK_eventPicture

	trigger = {
		NOT = { is_institution_enabled = renaissance }
		owner = {
			NOT = { has_country_flag = mr_turned_away_greek_migrants }
		}
		OR = {
			region = france_region
			region = italy_region
			region = south_german_region
			region = iberia_region
			region = balkan_region
			region = egypt_region
			region = maghreb_region
			region = mashriq_region
			region = anatolia_region
		}
		OR = {
			has_province_flag = ren_culture_picked
			province_has_center_of_trade_of_level = 1
			development = 18
		}
		NOT = {
			calc_true_if = {
				all_province = {
					OR = {
						region = france_region
						region = italy_region
						region = south_german_region
						region = iberia_region
						region = balkan_region
						region = egypt_region
						region = maghreb_region
						region = mashriq_region
						region = anatolia_region
					}
					OR = {
						has_province_flag = ren_culture_picked
						province_has_center_of_trade_of_level = 1
						development = 18
					}
					has_province_modifier = mr_greek_migrants
				}
				amount = 4
			}
		}
	}
	
	mean_time_to_happen = {
		days = 730
		modifier = {
			factor = 0.5
			has_province_modifier = mr_patronage_of_artists_province
		}
	}
	
	option = { #allow them to settle here
		name = mr_institutions.2.a
		
		owner = {
			add_years_of_income = -1
			add_base_tax = 1
			add_base_production = 1
		}
		add_province_modifier = {
			name = mr_greek_migrants
			duration = 9125
		}
		custom_tooltip = MORE_LIKELY_FOR_RENAISSANCE
	}
	option = { #turn them away
		name = mr_institutions.2.b
		set_country_flag = mr_turned_away_greek_migrants
	}
}

country_event = { #The Church Funds the Arts
	id = mr_institutions.3
	title = mr_institutions.3.t
	desc = mr_institutions.3.d
	picture = BIG_BOOK_eventPicture
	
	fire_only_once = yes

	trigger = {
		NOT = { is_institution_enabled = renaissance }
		religion = catholic
		artist = 1
		NOT = {
			any_owned_province = {
				has_province_flag = ren_culture_picked
			}
		}
		alliance_with = PAP
	}
	
	mean_time_to_happen = {
		days = 365
	}
	
	option = { #great
		name = mr_institutions.3.a
		define_advisor = {
			type = artist
			skill = 3
			cost_multiplier = 0.5
		}
		set_country_flag = mr_church_funded_arts
		custom_tooltip = ELIGIBLE_IF_ARTIST_IS_HIRED
	}
}